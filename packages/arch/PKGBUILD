# Maintainer: Your Name <youremail@domain.com>
pkgname=wk2gtkpdf
pkgver=0.0.12
pkgrel=3
epoch=
pkgdesc="wk2gtkpdf cpp library and command line interface"
arch=(x86_64)
url=""
license=('MIT')
groups=()
depends=(webkit2gtk-4.1 systemd xorg-server-xvfb)
makedepends=()
checkdepends=()
optdepends=()
provides=()
conflicts=(libicprint)
replaces=()
backup=()
options=()
install=wk2gtkpdf.install
changelog=
source=($pkgname-$pkgver.tar.gz)
noextract=()
sha256sums=('388b98c4f4d9f57cd748df7f4b5632fc615b07df3d224069101a5c4efef1beca')



build() {

# Build the library
	make -C ./src/wk2gtkpdf USER_CXXFLAGS="-DPODOFO_010"

# Build the command line interface
	USER_LIBDIR="-L${srcdir}/src/wk2gtkpdf -lwk2gtkpdf"
	USER_INCDIR="-I${srcdir}/src"
	make USER_LIBDIR="$USER_LIBDIR" USER_INCDIR="$USER_INCDIR" -C ./src/cli

}

package() {

	make install -C "${srcdir}/src/cli" DESTDIR="${pkgdir}"
	make install -C "${srcdir}/src/wk2gtkpdf" DESTDIR="${pkgdir}"
	install -Dm644 -t "$pkgdir/usr/lib/systemd/system" xvfb.service
	install -Dm644 -t "$pkgdir/usr/share/polkit-1/rules.d" 50-wk2gtkpdf.rules
	install -Dm644 -t "$pkgdir/usr/share/wk2gtkpdf/" ./templates/*.css
	install -Dm644 -t "$pkgdir/usr/lib/pkgconfig" wk2gtkpdf.pc
	install -Dm644 -t "$pkgdir/usr/share/licenses/wk2gtkpdf" LICENSE


}

